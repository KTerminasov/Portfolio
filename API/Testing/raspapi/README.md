# API Яндекс расписаний

## Начало работы с API

Для начала откроем [посвященную API Яндекс.Расписания страницу](https://yandex.ru/dev/rasp/raspapi/) на сайте технологии Яндекса, а также [сам сайт расписаний](https://rasp.yandex.ru/), где можно увидеть, как реализован клиент, использующий API.

Зарегистрировавшись в кабинете разработчика получим ключ (токен), который даст нам доступ к API и который нужно будет использовать в каждом запросе к API. Добавим его в Postman. Для этого перейдем во вкладку Authorization, установим type API key и вставим наш ключ. Также, открывая пример запроса, мы можем увидеть, что при каждом запросе в нем нужно указывать ключ. Значит, нужно установить Add to: Query Params. Получим:

![image](https://github.com/KTerminasov/Portfolio/assets/115955325/d7a7caf0-3731-4dce-8709-97071eb19db9)

Далее перейдем к изучению [документации](https://yandex.ru/dev/rasp/doc/ru/).

В введении говорится, что API организован в соответствии с принципами REST, а взаимодействие с API осуществляется по протоколу HTTPS посредством **GET-запросов**. Тут же сказано  о том, что данные возвращаются в форматах JSON и XML, то есть в заголовках запросов нужно добавить Content-Type: application/json или application/xml, в зависимости от того формата, с которым будем работать:

![image](https://github.com/KTerminasov/Portfolio/assets/115955325/cbaf367a-3d0b-49fc-9f1e-763b2534cd55)



## Тестирование запросов 

### Список всех доступных станций

Сначала получим список всех доступных станций, так как коды станций используются во всех остальных запросах.

В документации представлен следующий пример запроса ```https://api.rasp.yandex.net/v3.0/stations_list/?apikey={ключ}&lang=ru_RU&format=json```. Вставим его в Postman, тип запроса устаовим GET в соответствии со сказанным во введении:

![image](https://github.com/KTerminasov/Portfolio/assets/115955325/266b7f60-bfda-4af5-9f90-a678babcd395)

После выполнения запроса получим json файл, содержащий информацию обо всех станциях, информацию о которых предоставляют Яндекс.Расписания:

![image](https://github.com/KTerminasov/Portfolio/assets/115955325/ba6d4039-dec1-434d-a498-27791d3d9551)

#### Разбор примера возвращаемого значения ####

> Ответ оформлен в виде набора вложенных массивов: на верхнем уровне перечислены страны, в описании каждой страны — регионы, в каждом регионе — города, в каждом городе — станции.

Самый верхнеуровневый элемент - массив объектов countries. 
```
{
  "countries": [
```


Далее с помощью поиска по файлу получим коды Санкт-Петербурга и Москвы:

![image](https://github.com/KTerminasov/Portfolio/assets/115955325/2fc97ffc-ebec-44d9-a7c3-f58e66d592d9)
![image](https://github.com/KTerminasov/Portfolio/assets/115955325/a427694c-68f9-4da7-913f-b1da34bc4859)

Зная коды городов, мы сможем протестировать остальные запросы.

### Расписание рейсов между станциями

Используя 




